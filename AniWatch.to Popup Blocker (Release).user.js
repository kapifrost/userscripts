// ==UserScript==
// @name         AniWatch.to Popup Blocker (Release)
// @namespace    https://kapifrost.github.io/
// @downloadURL  https://github.com/kapifrost/userscripts/raw/main/AniWatch.to%20Popup%20Blocker%20(Release).user.js
// @updateURL    https://github.com/kapifrost/userscripts/raw/main/AniWatch.to%20Popup%20Blocker%20(Release).user.js
// @version      1.2
// @description  Remove AniWatch.To Popup Ads
// @author       kapifrost
// @match        https://hianime.to/*
// @match        https://aniwatch.to/*
// @match        https://aniwatchtv.to/*
// @match        https://aniwatch.nz/*
// @match        https://aniwatchtv.se/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=aniwatch.to
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function(){'use strict';const a={ASTEXT:"src",BSTEXT:"blocked-src",AHTEXT:"href",BHTEXT:"blocked-href",ATTEXT:"html",BTTEXT:"blocked-html",BTTEXT1:"innerHTML",D:"debugger"},b=new URL(window.location.href),c=b.hostname.startsWith("hianime");Date.prototype.getTime=()=>0,window.performance=window.performance||{},window.performance.now=()=>0;const d=window.console.log,e=function(){}.toString.toString();window.console.log=function(a){return 50==arguments.length||50==a.length||"<div></div>"==a.outerHTML||a?.toString?.toString()!=e?void 0:d.apply(this,arguments)};const f=window.console.table;window.console.table=function(a){return 50==a.length?void 0:a?.dep?.toString.toString()==e?f.apply(this,arguments):void 0},window.console.clear=()=>{},window.console.clear.apply=()=>{};const g=Function.prototype.constructor;Function.prototype.constructor=function(b){if(b==a.D){let a=function(){};return a.call=function(){},a.apply=function(){},a}return g.apply(this,arguments)};const h=["nossairt.net","nabauxou.net","tag.min.js","/4/","/5/","6551527","6534229","?oo=1&aab=1","fac.php","afu.php","apu.php","e2ertt.com","cdnads.com","perf.gif","platform-api.sharethis.com","sharethis","google-analytics"],i=[atob("e2NvbnN0IGM9cy5jaGFyQ29kZUF0KDApO3JldHVybiBjPj02NSYmYzw9OTA/U3RyaW5nLmZyb21DaGFyQ29kZSgoYy02NSsyNi0xMiklMjYrNjUpOmM+PTk3JiZjPD0xMjI/U3RyaW5nLmZyb21DaGFyQ29kZSgoYy05NysyNi0xMiklMjYrOTcpOnN9")];window.blockDomains=h;const j=new MutationObserver(b=>{for(const c of b)"childList"===c.type&&Array.from(c.addedNodes).forEach(b=>{switch(b?.tagName?.toLowerCase()){case"script":{let c=!1;if(b.src)for(const a of h)b.src.includes(a)&&(c=!0);else for(const a of i)b.innerHTML.includes(a)&&(c=!0);c&&(b.setAttribute(a.BSTEXT,b[a.ASTEXT]),b.removeAttribute(a.ASTEXT),b[a.BTTEXT1]&&(b.setAttribute(a.BTTEXT,b[a.BTTEXT1]),b[a.BTTEXT1]=""));break}case"div":{if(this===document.documentElement&&"DIV"==b.tagName&&b.getAttribute("style").includes("2147483647"))return;break}case"a":{if(b.href)for(const c of h)b.href.includes(c)&&(console.log(b),b.setAttribute(a.BHTEXT,b.href),b.removeAttribute(a.AHTEXT));break}}})});j.observe(document,{childList:!0,subtree:!0});const k=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(a,b){return h.some(a=>b.includes(a))?void 0:k.apply(this,arguments)};const l=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){return 0===this.readyState?void 0:l.apply(this,arguments)};const m=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){return 0===this.readyState?void 0:m.apply(this,arguments)};const n=Node.prototype.appendChild,o=document.createElement("DIV");o.id="HiddenElement",o.style.display="none",document.body?.appendChild(o),Node.prototype.appendChild=function(b){if("SCRIPT"==b.tagName){let c=!1;if(b.src)for(const a of h)b.src.includes(a)&&(c=!0);else for(const a of i)b.innerHTML.includes(a)&&(c=!0);if(c)return b.setAttribute(a.BSTEXT,b[a.ASTEXT]),b.removeAttribute(a.ASTEXT),b[a.BTTEXT1]&&(b.setAttribute(a.BTTEXT,b[a.BTTEXT1]),b[a.BTTEXT1]=""),n.apply(this,[b])}else if("DIV"==b.tagName&&b.getAttribute("style")&&(b.getAttribute("style").includes("2147483647")||b.getAttribute("style").includes("999999")))return;return n.apply(this,arguments)};const p=Node.prototype.removeChild;Node.prototype.removeChild=function(a){return a.parentElement==this?p.apply(this,arguments):void 0};const q=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(a){if(a.startsWith("mouse")||a.startsWith("touch")){let a=new Error().stack;for(const b of h)if(a.includes(b))return}return q.apply(this,arguments)};HTMLScriptElement.prototype.dispatchEvent;HTMLScriptElement.prototype.dispatchEvent=function(){}})();
