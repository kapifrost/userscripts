// ==UserScript==
// @name         AniWatch.to Popup Blocker (Release)
// @namespace    https://kapifrost.github.io/
// @downloadURL  https://github.com/kapifrost/userscripts/raw/main/AniWatch.to%20Popup%20Blocker%20(Release).user.js
// @updateURL    https://github.com/kapifrost/userscripts/raw/main/AniWatch.to%20Popup%20Blocker%20(Release).user.js
// @version      1.1
// @description  Remove AniWatch.To Popup Ads
// @author       kapifrost
// @match        https://hianime.to/*
// @match        https://aniwatch.to/*
// @match        https://aniwatchtv.to/*
// @match        https://aniwatch.nz/*
// @match        https://aniwatchtv.se/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=aniwatch.to
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function(){'use strict';const a=new URL(window.location.href),b=a.hostname.startsWith("hianime");Date.prototype.getTime=()=>0,window.performance=window.performance||{},window.performance.now=()=>0;const c=window.console.log,d=function(){}.toString.toString();window.console.log=function(a){return 50==arguments.length||50==a.length||"<div></div>"==a.outerHTML||a?.toString?.toString()!=d?void 0:c.apply(this,arguments)};const e=window.console.table;window.console.table=function(a){return 50==a.length?void 0:a?.dep?.toString.toString()==d?e.apply(this,arguments):void 0},window.console.clear=()=>{},window.console.clear.apply=()=>{};const f=Function.prototype.constructor;Function.prototype.constructor=function(a){if("debugger"==a){let a=function(){};return a.call=function(){},a.apply=function(){},a}return f.apply(this,arguments)};const g=["nossairt.net","nabauxou.net","tag.min.js","/4/","/5/","6551527","6534229","?oo=1&aab=1","fac.php","afu.php","apu.php","e2ertt.com","cdnads.com","perf.gif","platform-api.sharethis.com","sharethis","google-analytics"],h=[atob("e2NvbnN0IGM9cy5jaGFyQ29kZUF0KDApO3JldHVybiBjPj02NSYmYzw9OTA/U3RyaW5nLmZyb21DaGFyQ29kZSgoYy02NSsyNi0xMiklMjYrNjUpOmM+PTk3JiZjPD0xMjI/U3RyaW5nLmZyb21DaGFyQ29kZSgoYy05NysyNi0xMiklMjYrOTcpOnN9")];(function(){function a(a,c,d){let e=c+(b.current=16807*b.current%2147483647,b.current%(d-c));return e}const b={current:(new Date().toISOString().split("T")[0]+atob("VjJAJVlTVTJCXUd+")).split("").reduce(function(a,b){return 2147483647&(a<<5)-a+b.charCodeAt(0)},0),times:1,tld:atob("Y29t")};for(let c=0;c<b.times;c++){b.random="";let d=a(1,8,16);for(let c=0;c<d;c++)b.random+=String.fromCharCode(a(0,97,122));c==b.times-1&&g.push(`${b.random}.${b.tld}`)}})();const i=new MutationObserver(a=>{for(const b of a)"childList"===b.type&&Array.from(b.addedNodes).forEach(a=>{switch(a?.tagName?.toLowerCase()){case"script":{let b=!1;if(a.src)for(const c of g)a.src.includes(c)&&(b=!0);else for(const c of h)a.innerHTML.includes(c)&&(b=!0);b&&(a.src="");break}case"div":{if(this===document.documentElement&&"DIV"==a.tagName&&a.getAttribute("style").includes("2147483647"))return;break}}})});i.observe(document,{childList:!0,subtree:!0});const j=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(a,b){return g.some(a=>b.includes(a))?void 0:j.apply(this,arguments)};const k=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){return 0===this.readyState?void 0:k.apply(this,arguments)};const l=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){return 0===this.readyState?void 0:l.apply(this,arguments)};const m=Node.prototype.appendChild,n=document.createElement("DIV");n.id="HiddenElement",n.style.display="none",document.body?.appendChild(n),Node.prototype.appendChild=function(a){if("SCRIPT"==a.tagName){let b=!1;if(a.src)for(const c of g)a.src.includes(c)&&(b=!0);else for(const c of h)a.innerHTML.includes(c)&&(b=!0);if(b){let a=document.createElement("script");return m.apply(this,[a])}}else if("DIV"==a.tagName&&a.getAttribute("style")&&(a.getAttribute("style").includes("2147483647")||a.getAttribute("style").includes("999999")))return;return m.apply(this,arguments)};const o=Node.prototype.removeChild;Node.prototype.removeChild=function(a){return a.parentElement==this?o.apply(this,arguments):void 0};const p=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(a){if(a.startsWith("mouse")||a.startsWith("touch")){let a=new Error().stack;for(const b of g)if(a.includes(b))return}return p.apply(this,arguments)}})();
